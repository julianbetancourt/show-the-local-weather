$.getJSON("http://ip-api.com/json",function(t){var n,i,a,e,d,u=t.lat,o=t.lon,r=t.countryCode,c=t.city,s={};$.getJSON("http://api.openweathermap.org/data/2.5/weather?lat="+u+"&lon="+o+"&APPID=da362a8aa3d1448a36245341e0d8a196",function(t){function u(t){return"K"===a?i=1.8*t-459.67:"C"===a&&(i=1.8*t+32),Math.round(i)}function o(t){return"K"===a?i=t-273.15:"F"===a&&(i=(t-32)*(5/9)),Math.round(i)}function w(t){t.length>9?$(".city").addClass("fixed-city").text(t):$(".city").text(t)}function h(){"US"===r||"BS"===r||"BZ"===r||"KY"===r||"PW"===r?($(".number").text(u(i)),a="F",$(".unit span").text("ºF")):($(".number").text(o(i)),a="C",$(".unit span").text("ºC"))}function y(){s={"01d":"wi-day-sunny","01n":"wi-night-clear","02d":"wi-day-cloudy","02n":"wi-night-cloudy","03d":"wi-day-cloudy-gusts","03n":"wi-night-cloudy-gusts","04d":"wi-day-cloudy-gusts","04n":"wi-night-cloudy-gusts","09d":"wi-day-sprinkle","09n":"wi-night-sprinkle","10d":"wi-day-rain","10n":"wi-night-rain","11d":"wi-day-thunderstorm","11n":"wi-night-thunderstorm","13d":"wi-day-snow","13n":"wi-night-snow","50d":"wi-day-fog","50n":"wi-night-fog"},$(".weather-icon").addClass(s[d])}function g(t){return t=t.replace("wi-","")}function l(){$("body").addClass(g(s[d]))}n=t.weather[0].description,i=t.main.temp,a="K",e=t.weather[0].id,d=t.weather[0].icon,$(".unit").on("click",function(){"C"===a?($(".unit span").text("ºF"),$(".number").text(u(i)),a="F"):"F"===a&&($(".unit span").text("ºC"),$(".number").text(o(i)),a="C")}),$(".desc span").text(n),w(c),h(),y(),l()})});
